<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        'use strict';

        // Constructor, operator "new"

        /* The regular syntax '{..}' allows us to create only one object */
        /* But often we need to create many similar objects like multiple users or menu items or etc., that can be done using "Constructor Function" and "new" opeartor. */
        /* The main purpose of constructor is to implement reusable object creation code. */

        /* Constructor functions are like regular functions. Ther are two conventions: */
        /* 1. They are named with capital letter first. */
        /* 2. They should be executed only with "new" operator. */

        function User(name){
            this.name = name;
            this.isAdmin = false;
        }
        let user1 = new User("Abhi");
        console.log(user1.name);
        console.log(user1.isAdmin);

        let user2 = new User("Chorge");
        console.log(user2.name);
        console.log(user2.isAdmin);
        
        /* When a function is executed with new, it does the following steps: */
        /* 1. A new empty object is created and assigned to "this". */
        /* 2. The function body executes. Usually it modifies "this", and adds new property to it. */
        /* 3. The value of this is returned. */



        // Constructor mode test: new.target
        /* Inside a function, we can check whether it was called with 'new' or without 'new', using a special "new.target" property */

        function Marks(subject, marks){
            if(!new.target){
                return new Marks(subject, marks); // If not used "new", it adds "new"
            }
            this.subject = subject;
            this.marks = marks;
        }
        let student1 = new Marks("Abhi", 80);
        console.log(student1.subject);
        console.log(student1.marks);

        let student2 = Marks("Abhi", 90);
        console.log(student2.subject);
        console.log(student2.marks);



        // Return from constructors
        /* Ususally constructors don not have a return statement. Their task is to write all the necessary stuff into "this", and it automatially becomes the result */
        
        /* But if there is a "return" statement, then the rule is simple: */
        /* 1. If "return" is called with an object, then the object is returned instead of this. */
        /* 2. If "return" is called with a primitive, it's ignored */
        
        /* In simple swords, "return" with an object returns that object, in all other cases "this" will returned. */

        function Bio1(name){
            this.name = "Abhi";
            return {name : "Chorge"};
        }
        console.log(new Bio1().name);

        function Bio2(name){
            this.name = "Abhi";
            return name = "Chorge";
        }
        console.log(new Bio2().name);



        // Methods in constructor
        
        function Info(name){
            this.name = name;
            this.sayHi = () => {
                console.log(`Hello World, I am ${name}.`)
            }
        }
        let abhi = new Info("Abhi");
        console.log(abhi.name);
        abhi.sayHi();
    </script>
</body>
</html>