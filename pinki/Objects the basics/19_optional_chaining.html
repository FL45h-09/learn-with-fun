<script>
    'use strict';
    /* #1 Option chaining ?. 
        The optional chaining ?. is a safe way to access nested object properties, even if an intermediate property doesn’t exist. */

        // a. The “non-existing property” problem
        let user = {}; // a user without "address" property
        alert(user.address); //undefined
        // console.log(user.address.street); //error
        // console.log(user.address ? user.address.street : undefined); //undefined

        /* b. Optional chaining : The optional chaining ?. stops the evaluation, if the value before ?. is undefined or null and returns undefined. */
        let user1 = null;
        alert(user1?.address?.street); //undefined

        /* c. Short-circuiting : '?.' immediately stops (“short-circuits”) the evaluation if the left part doesn’t exist.
        So, if there are any further function calls or operations to the right of ?., they won’t be made. */
        let user3 = null;
        let x = 0;
        user3?.sayHi(x++); // no "user", so the execution doesn't reach sayHi call and x++
        alert(x); // 0, value not incremented

        /* d. Other variants: ?.(), ?.[] optional chaining function,  option chaining square brackets */
            // ?.() is used to call a function that may not exist.
            let userAdmin = {
                admin(){
                    alert("Hello I'm admin");
                }
            }
            let userGuest = {};
            userAdmin.admin?.(); //"Hello I'm admin"
            userGuest.admin?.(); // nothing happens (no such method)

            // ?.[] syntax also works, if we’d like to use brackets [] to access properties instead of dot .. Similar to previous cases, it allows to safely read a property from an object that may not exist.
            let key = 'firstname';
            let user4 = {
                firstname : 'Pinki'
            };
            let user5 = null;
            alert(user4?.[key]); //Pinki
            alert(user5?.[key]); //undefined

        // Also we can use ?. with delete:
            delete user4?.firstname;
            console.log(user4?.[key]); //undefined
            
</script>